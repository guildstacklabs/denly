<div class="vine-progress" style="--vine-progress:@ProgressPercent;">
    <svg class="vine-arc" viewBox="0 0 220 120" role="img" aria-label="@AriaLabel">
        <path class="vine-track"
              d="M10 100 C 60 20, 160 20, 210 100"
              pathLength="100" />
        <path class="vine-fill"
              d="M10 100 C 60 20, 160 20, 210 100"
              pathLength="100"
              style="stroke-dashoffset:@(100 - ProgressPercent)" />
    </svg>

    <div class="vine-leaf" aria-hidden="true">
        <svg viewBox="0 0 20 20">
            <path d="M3 14C9 8 13 4 18 3C17 8 12 14 6 18C5 16 4 15 3 14Z" />
        </svg>
    </div>

    <div class="vine-center">
        <div class="vine-percent">@ProgressPercent%</div>
        @if (!string.IsNullOrWhiteSpace(Label))
        {
            <div class="vine-label">@Label</div>
        }
    </div>
</div>

@code {
    [Parameter] public int Value { get; set; }
    [Parameter] public string? Label { get; set; }

    private int ProgressPercent => Math.Clamp(Value, 0, 100);
    private string AriaLabel => string.IsNullOrWhiteSpace(Label)
        ? $"Progress {ProgressPercent}%"
        : $"{Label} {ProgressPercent}%";
}
