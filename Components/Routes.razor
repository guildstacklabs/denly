@inject ILogger<Routes> Logger

<ErrorBoundary @ref="_errorBoundary">
    <ChildContent>
        <Router AppAssembly="typeof(MauiProgram).Assembly" NotFoundPage="typeof(Pages.NotFound)">
            <Found Context="routeData">
                <RouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)" />
                <FocusOnNavigate RouteData="routeData" Selector="h1" />
            </Found>
        </Router>
    </ChildContent>
    <ErrorContent Context="ex">
        <div class="routes-error">
            <h2 class="routes-error__title">Application Error</h2>
            @{
                Logger.LogError(ex, "Routes error boundary captured an exception");
            }
            <p class="routes-error__message">An unexpected error occurred.</p>
            <details class="routes-error__details">
                <summary class="routes-error__summary">Error Details</summary>
                <pre class="routes-error__trace">@ex.ToString()</pre>
            </details>
            <button class="routes-error__button" @onclick="Recover">
                Try Again
            </button>
        </div>
    </ErrorContent>
</ErrorBoundary>

@code {
    private ErrorBoundary? _errorBoundary;

    private void Recover()
    {
        _errorBoundary?.Recover();
    }
}
